(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{73059:function(e,t,r){Promise.resolve().then(r.bind(r,12302))},12302:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var a=r(57437),s=r(2265),i=r(51330),n=r(70849),o=r(95737),l=r(3274),d=r(47267),c=r(36013),m=r(50495),u=r(94693),x=r(71510),p=r(37164),h=r(40933),g=r(12092),b=r(85016),y=r(66648);function f(e){let{sessionId:t,imageUri:r,metadata:i,onShare:n,onDownload:o}=e,[l,f]=(0,s.useState)(!1);return(0,a.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative group",onHoverStart:()=>f(!0),onHoverEnd:()=>f(!1),children:(0,a.jsxs)(c.Zb,{className:"overflow-hidden bg-gradient-to-br from-white via-white to-primary/5 dark:from-gray-900 dark:via-gray-900 dark:to-primary/20 border-primary/10 group-hover:border-primary/30 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"relative aspect-square",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary/20 via-transparent to-yellow-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)(y.default,{src:r.replace("ipfs://","https://gateway.pinata.cloud/ipfs/"),alt:i.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105"}),(0,a.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:l?1:0},className:"absolute inset-0 bg-gradient-to-b from-black/60 to-black/80 flex items-center justify-center gap-3 backdrop-blur-sm",children:[(0,a.jsx)(m.z,{variant:"outline",size:"icon",className:"bg-white/10 hover:bg-white/20 border-white/20 hover:border-white/40",onClick:n,children:(0,a.jsx)(x.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsx)(m.z,{variant:"outline",size:"icon",className:"bg-white/10 hover:bg-white/20 border-white/20 hover:border-white/40",onClick:o,children:(0,a.jsx)(p.Z,{className:"w-4 h-4 text-white"})})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-2 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent group-hover:from-primary/80 group-hover:to-primary transition-all duration-300",children:[i.name," ✨"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:i.description}),(0,a.jsx)("div",{className:"space-y-2",children:i.attributes.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Duration"===e.trait_type&&(0,a.jsx)(h.Z,{className:"w-4 h-4 text-blue-500"}),"Mood Score"===e.trait_type&&(0,a.jsx)(g.Z,{className:"w-4 h-4 text-yellow-500"}),"Achievements"===e.trait_type&&Number(e.value)>0&&(0,a.jsx)(b.Z,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsxs)(u.C,{variant:"outline",className:"text-xs bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm border-primary/20",children:[e.trait_type,": ",e.value," ","Duration"===e.trait_type?"min":""]})]},t))})]})]})})}var v=r(33907),j=r(54775),N=r(15574),w=r(76780),k=r(34446),E=r(47412),F=r(16463),C=r(49127),Z=r(37418);function S(e){let{sessions:t}=e,[r,i]=(0,s.useState)("grid"),[n,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),x=(0,F.useRouter)(),{user:p}=(0,C.a)(),h=async e=>{try{await navigator.share({title:"My Therapy Session NFT ✨",text:"Check out my therapy session achievement! \uD83C\uDF1F",url:"".concat(window.location.origin,"/therapy/nft/").concat(e)})}catch(e){e instanceof Error&&"AbortError"!==e.name&&o("Failed to share NFT. Please try again.")}},g=async e=>{try{o(null);let t=await fetch(e.replace("ipfs://","https://gateway.pinata.cloud/ipfs/"));if(!t.ok)throw Error("Failed to download image");let r=await t.blob(),a=window.URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download="therapy-session-nft.png",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}catch(e){console.error("Error downloading:",e),o("Failed to download NFT. Please try again.")}},y=async()=>{if(!(null==p?void 0:p.id)){o("Please sign in to start a session");return}try{u(!0);let e=await (0,Z.L0)({userId:p.id,type:"text"});x.push("/therapy/".concat(e[0].id))}catch(e){console.error("Failed to start session:",e),o("Failed to start session. Please try again.")}finally{u(!1)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 via-primary/5 to-primary/20 blur-3xl -z-10"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-8 p-6 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(v.Z,{className:"w-6 h-6 text-primary animate-pulse"}),(0,a.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Your Journey NFTs"})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Each NFT represents a milestone in your therapy journey"})]}),(0,a.jsxs)("div",{className:"flex gap-2 p-1 rounded-lg bg-white/5 backdrop-blur-sm border border-white/10",children:[(0,a.jsxs)(m.z,{variant:"grid"===r?"default":"ghost",size:"sm",onClick:()=>i("grid"),className:"relative overflow-hidden",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"grid"===r&&(0,a.jsx)(d.E.div,{layoutId:"viewMode",className:"absolute inset-0 bg-primary opacity-10",transition:{type:"spring",bounce:.2,duration:.6}})]}),(0,a.jsxs)(m.z,{variant:"list"===r?"default":"ghost",size:"sm",onClick:()=>i("list"),className:"relative overflow-hidden",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"list"===r&&(0,a.jsx)(d.E.div,{layoutId:"viewMode",className:"absolute inset-0 bg-primary opacity-10",transition:{type:"spring",bounce:.2,duration:.6}})]})]})]})]}),n&&(0,a.jsxs)(E.bZ,{variant:"destructive",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)(E.X,{children:n})]}),(0,a.jsx)(k.M,{mode:"wait",children:(0,a.jsxs)(d.E.div,{layout:!0,className:"grid"===r?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:[t.map((e,t)=>(0,a.jsx)(d.E.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.1*t},children:(0,a.jsx)(f,{sessionId:e.sessionId,imageUri:e.imageUri,metadata:e.metadata,onShare:()=>h(e.sessionId),onDownload:()=>g(e.imageUri)})},e.sessionId)),0===t.length&&(0,a.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:(0,a.jsx)(b.Z,{className:"w-10 h-10 text-primary"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"No NFTs Yet"}),(0,a.jsx)("p",{className:"text-muted-foreground text-center max-w-md mb-8",children:"Complete therapy sessions to earn special NFTs that mark your progress and achievements"}),(0,a.jsx)(m.z,{size:"lg",className:"bg-primary/20 hover:bg-primary/30 text-primary",onClick:y,disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting Session..."]}):"Start Session"})]})})]})})]})}function T(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),{address:u,isConnected:x}=(0,i.m)();return((0,s.useEffect)(()=>{let e=async()=>{if(u&&x)try{m(null),d(!0);let e=await (0,n.c7)(u);t(e)}catch(e){console.error("Error loading NFTs:",e),m(e instanceof Error?e.message:"Failed to load NFTs")}finally{d(!1)}};x&&e()},[u,x]),x)?r?(0,a.jsx)("div",{className:"flex min-h-[80vh] items-center justify-center bg-gradient-to-b from-background to-background/80",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 p-8 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary/20 blur-xl"}),(0,a.jsx)(l.Z,{className:"w-12 h-12 animate-spin text-primary relative"})]}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading your NFTs..."})]})}):c?(0,a.jsx)("div",{className:"flex min-h-[80vh] items-center justify-center bg-gradient-to-b from-background to-background/80",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-8 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Error Loading NFTs"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:c})]})}):(0,a.jsx)("div",{className:"min-h-[80vh] py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-background to-background/80",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)(S,{sessions:e})})}):(0,a.jsx)("div",{className:"flex min-h-[80vh] items-center justify-center bg-gradient-to-b from-background to-background/80",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-8 rounded-2xl bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(o.Z,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Connect Wallet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-8",children:"Connect your wallet to view your therapy session NFTs and track your progress"}),(0,a.jsx)("w3m-button",{})]})})}},47412:function(e,t,r){"use strict";r.d(t,{Cd:function(){return d},X:function(){return c},bZ:function(){return l}});var a=r(57437),s=r(2265),i=r(13027),n=r(37440);let o=(0,i.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(o({variant:s}),r),...i})});l.displayName="Alert";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});d.displayName="AlertTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...s})});c.displayName="AlertDescription"},94693:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(57437);r(2265);var s=r(13027),i=r(37440);let n=(0,s.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:r}),t),...s})}}},function(e){e.O(0,[8502,6649,7267,5504,4496,9348,2736,4683,2920,2971,7023,1744],function(){return e(e.s=73059)}),_N_E=e.O()}]);