(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6070],{17514:function(e,t,s){Promise.resolve().then(s.bind(s,73904))},73904:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var a=s(57437),r=s(2265),i=s(36013),n=s(50495),l=s(83102),d=s(67135),o=s(74421),c=s(41647),u=s(49127),m=s(79869),f=s(80233),p=s(18604),x=s(20500),h=s(6600),N=s(74453),y=s(4436),j=s(92699),g=s(38296),v=s(48484),w=s(37440);let b=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:i=!0,...n}=e;return(0,a.jsx)(v.f,{ref:t,decorative:i,orientation:r,className:(0,w.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...n})});b.displayName=v.f.displayName;var _=s(35657),A=s(90837),L=s(79512),k=s(94880),C=s(70849),S=s(3274);function T(e){let{open:t,onOpenChange:s,onSelect:i}=e,[l,d]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[m,f]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),{user:h}=(0,u.a)();return(0,r.useEffect)(()=>{let e=async()=>{if(null==h?void 0:h.walletAddress)try{x(null),f(!0);let e=await (0,C.c7)(h.walletAddress);console.log("Loaded user sessions:",e);let t=e.map(e=>({id:e.sessionId,name:e.metadata.name,image:e.imageUri,collection:"Therapy Sessions"}));console.log("Mapped NFTs:",t),c(t)}catch(e){console.error("Error loading NFTs:",e),x(e instanceof Error?e.message:"Failed to load NFTs")}finally{f(!1)}};t&&(null==h?void 0:h.walletAddress)&&e()},[t,null==h?void 0:h.walletAddress]),(0,a.jsx)(A.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(A.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(A.fK,{children:[(0,a.jsx)(A.$N,{children:"Select NFT Avatar"}),(0,a.jsx)(A.Be,{children:"Choose an NFT from your therapy sessions to use as your avatar"})]}),(null==h?void 0:h.walletAddress)?m?(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"w-8 h-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading your NFTs..."})]})}):p?(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-red-500",children:p}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>s(!1),className:"mt-4",children:"Close"})]})}):0===o.length?(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"You don't have any NFTs yet. Complete therapy sessions to earn NFTs that you can use as your avatar."}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>s(!1),className:"mt-4",children:"Close"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.x,{className:"h-[300px] pr-4",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:o.map(e=>(0,a.jsxs)("div",{className:"relative group cursor-pointer rounded-lg border-2 transition-colors ".concat((null==l?void 0:l.id)===e.id?"border-primary":"border-transparent hover:border-primary/50"),onClick:()=>d(e),children:[(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-full aspect-square object-cover rounded-lg"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"Select"})})]},e.id))})}),(0,a.jsxs)(A.cN,{children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(n.z,{onClick:()=>{l&&(i(l),s(!1))},disabled:!l,children:"Use as Avatar"})]})]}):(0,a.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Please sign in with your wallet to view your NFTs"}),(0,a.jsx)(n.z,{variant:"outline",onClick:()=>s(!1),className:"mt-4",children:"Close"})]})})]})})}var I=s(72797),B=s(16463);function E(){var e,t;let{user:s,isLoading:v}=(0,u.a)(),{toast:w}=(0,_.pm)(),{isDark:k,toggleTheme:C}=function(){let{theme:e,setTheme:t}=(0,L.F)();return{theme:e,toggleTheme:()=>{t("dark"===e?"light":"dark")},isDark:"dark"===e}}(),{isAdmin:S}=(0,I.A)(),E=(0,B.useRouter)(),[z,O]=(0,r.useState)({name:"",email:""});(0,r.useEffect)(()=>{s&&O({name:s.name||"",email:s.email||""})},[s]);let[F,M]=(0,r.useState)(!0),[P,R]=(0,r.useState)(!0),[Z,D]=(0,r.useState)("public"),[K,V]=(0,r.useState)(!1),[Y,U]=(0,r.useState)(!1),[q,J]=(0,r.useState)(!1),[$,H]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(null),G=e=>{let{name:t,value:s}=e.target;O(e=>({...e,[t]:s}))},W=async()=>{try{U(!0),await new Promise(e=>setTimeout(e,1e3)),w({title:"Avatar updated",description:"Your profile picture has been updated successfully."})}catch(e){w({title:"Error",description:"Failed to update avatar. Please try again.",variant:"destructive"})}finally{U(!1)}},ee=async()=>{try{J(!0),await new Promise(e=>setTimeout(e,1e3)),w({title:"Changes saved",description:"Your settings have been updated successfully."})}catch(e){w({title:"Error",description:"Failed to save changes. Please try again.",variant:"destructive"})}finally{J(!1)}};return(0,a.jsx)("div",{className:"container max-w-3xl pt-24 pb-16 px-8",children:v?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-0.5 mb-8 pl-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(i.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(i.Ol,{className:"pb-4 px-8",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-lg font-medium",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-primary"}),"Profile Settings"]}),(0,a.jsx)(i.SZ,{children:"Update your profile information and avatar"})]}),(0,a.jsx)(b,{}),(0,a.jsx)(i.aY,{className:"pt-6 px-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(c.qE,{className:"h-20 w-20 border-2 border-border",children:[(0,a.jsx)(c.F$,{src:(null==Q?void 0:Q.image)||(null==s?void 0:s.image)||""}),(0,a.jsx)(c.Q5,{className:"text-xl",children:(null===(e=z.name)||void 0===e?void 0:e[0])||(null===(t=z.email)||void 0===t?void 0:t[0])||"U"})]}),(0,a.jsxs)("div",{className:"absolute -bottom-2 -right-2 flex gap-1",children:[(0,a.jsx)(n.z,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full shadow-md",onClick:W,disabled:Y,children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsx)(n.z,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full shadow-md",onClick:()=>H(!0),children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"font-medium",children:z.name||"Your Name"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:z.email||"email@example.com"}),Q&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Using NFT: ",Q.name," from ",Q.collection]})]})]}),(0,a.jsxs)("div",{className:"grid gap-5",children:[(0,a.jsxs)("div",{className:"grid gap-2.5",children:[(0,a.jsx)(d._,{htmlFor:"name",className:"font-medium",children:"Full Name"}),(0,a.jsx)(l.I,{id:"name",name:"name",placeholder:"Enter your name",value:z.name,onChange:G,className:"max-w-md"})]}),(0,a.jsxs)("div",{className:"grid gap-2.5",children:[(0,a.jsx)(d._,{htmlFor:"email",className:"font-medium",children:"Email Address"}),(0,a.jsx)(l.I,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:z.email,onChange:G,className:"max-w-md"})]})]})]})})]}),S&&(0,a.jsxs)(i.Zb,{className:"shadow-sm border-primary/20",children:[(0,a.jsxs)(i.Ol,{className:"pb-4 px-8",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-lg font-medium text-primary",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Admin Access"]}),(0,a.jsx)(i.SZ,{className:"text-primary/80",children:"You have administrator privileges"})]}),(0,a.jsx)(i.aY,{className:"pt-6 px-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(d._,{className:"font-medium text-lg",children:"Admin Panel"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Access the admin dashboard to manage the platform"})]}),(0,a.jsxs)(n.z,{onClick:()=>E.push("/admin"),className:"gap-2 px-8 py-6 text-lg",size:"lg",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Open Admin Panel"]})]})})]}),(0,a.jsxs)(i.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(i.Ol,{className:"pb-4 px-8",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-lg font-medium",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-primary"}),"Notifications"]}),(0,a.jsx)(i.SZ,{children:"Configure how you receive notifications"})]}),(0,a.jsx)(b,{}),(0,a.jsxs)(i.aY,{className:"pt-6 px-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Push Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive notifications about your mental health journey"})]}),(0,a.jsx)(o.r,{checked:F,onCheckedChange:e=>{M(e),w({title:"Notifications updated",description:"Push notifications have been ".concat(e?"enabled":"disabled",".")})}})]}),(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Email Updates"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get weekly progress reports and updates"})]}),(0,a.jsx)(o.r,{checked:P,onCheckedChange:e=>{R(e),w({title:"Email updates updated",description:"Email updates have been ".concat(e?"enabled":"disabled",".")})}})]})]})]}),(0,a.jsxs)(i.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(i.Ol,{className:"pb-4 px-8",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-lg font-medium",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 text-primary"}),"Privacy"]}),(0,a.jsx)(i.SZ,{children:"Manage your privacy and data settings"})]}),(0,a.jsx)(b,{}),(0,a.jsxs)(i.aY,{className:"pt-6 px-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Profile Visibility"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Control who can see your profile information"})]}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"h-9",onClick:()=>{let e="public"===Z?"private":"public";D(e),w({title:"Privacy updated",description:"Your profile is now ".concat(e,".")})},children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"public"===Z?"Public":"Private"]})]}),(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Data Collection"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage how we collect and use your data"})]}),(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"h-9",onClick:()=>V(!0),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Manage"]})]})]})]}),(0,a.jsxs)(i.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(i.Ol,{className:"pb-4 px-8",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2 text-lg font-medium",children:[k?(0,a.jsx)(j.Z,{className:"w-5 h-5 text-primary"}):(0,a.jsx)(g.Z,{className:"w-5 h-5 text-primary"}),"Appearance"]}),(0,a.jsx)(i.SZ,{children:"Customize your app experience"})]}),(0,a.jsx)(b,{}),(0,a.jsx)(i.aY,{className:"pt-6 px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Dark Mode"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Switch between light and dark themes"})]}),(0,a.jsx)(o.r,{checked:k,onCheckedChange:e=>{C(),w({title:"Theme updated",description:"".concat(e?"Dark":"Light"," mode activated.")})}})]})})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4 px-1",children:(0,a.jsx)(n.z,{size:"lg",className:"px-8",onClick:ee,disabled:q,children:q?"Saving...":"Save Changes"})})]}),(0,a.jsx)(T,{open:$,onOpenChange:H,onSelect:e=>{X(e),w({title:"Avatar updated",description:"Your NFT has been set as your avatar."})}}),(0,a.jsx)(A.Vq,{open:K,onOpenChange:V,children:(0,a.jsxs)(A.cZ,{children:[(0,a.jsxs)(A.fK,{children:[(0,a.jsx)(A.$N,{children:"Data Collection Settings"}),(0,a.jsx)(A.Be,{children:"Manage how we collect and use your data. Your privacy is important to us."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Usage Analytics"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Help us improve by sharing usage data"})]}),(0,a.jsx)(o.r,{defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{className:"font-medium",children:"Personalization"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow us to personalize your experience"})]}),(0,a.jsx)(o.r,{defaultChecked:!0})]})]}),(0,a.jsxs)(A.cN,{children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,a.jsx)(n.z,{onClick:()=>{V(!1),w({title:"Settings saved",description:"Your data collection preferences have been updated."})},children:"Save Preferences"})]})]})})]})})}},41647:function(e,t,s){"use strict";s.d(t,{F$:function(){return d},Q5:function(){return o},qE:function(){return l}});var a=s(57437),r=s(2265),i=s(44458),n=s(37440);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.fC,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});l.displayName=i.fC.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.Ee,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",s),...r})});d.displayName=i.Ee.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.NY,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});o.displayName=i.NY.displayName},90837:function(e,t,s){"use strict";s.d(t,{$N:function(){return p},Be:function(){return x},Vq:function(){return d},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var a=s(57437),r=s(2265),i=s(79544),n=s(74697),l=s(37440);let d=i.fC;i.xz;let o=i.h_;i.x8;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});c.displayName=i.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=i.Dx.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});x.displayName=i.dk.displayName},83102:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(57437),r=s(2265),i=s(37440);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},67135:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var a=s(57437),r=s(2265),i=s(38364),n=s(13027),l=s(37440);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.f,{ref:t,className:(0,l.cn)(d(),s),...r})});o.displayName=i.f.displayName},94880:function(e,t,s){"use strict";s.d(t,{x:function(){return l}});var a=s(57437),r=s(2265),i=s(62125),n=s(37440);let l=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(i.fC,{ref:t,className:(0,n.cn)("relative overflow-hidden",s),...l,children:[(0,a.jsx)(i.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(d,{}),(0,a.jsx)(i.Ns,{})]})});l.displayName=i.fC.displayName;let d=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,a.jsx)(i.gb,{ref:t,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,a.jsx)(i.q4,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.gb.displayName},74421:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var a=s(57437),r=s(2265),i=s(9646),n=s(37440);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.fC,{className:(0,n.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(i.bU,{className:(0,n.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});l.displayName=i.fC.displayName},35657:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=l(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},49127:function(e,t,s){"use strict";s.d(t,{H:function(){return l},a:function(){return d}});var a=s(57437),r=s(2265),i=s(6649);let n=(0,r.createContext)(void 0);function l(e){var t;let{children:s}=e,{login:l,logout:d,authenticated:o,user:c}=(0,i.s)(),[u,m]=(0,r.useState)({isLoading:!1,isAuthenticated:!1,user:null,showLoginModal:!1,showUserForm:!1});(0,r.useEffect)(()=>{let e=!0;return(async()=>{var t,s;if(!e||!(null==c?void 0:null===(t=c.wallet)||void 0===t?void 0:t.address))return;let a=c.wallet.address;if(o&&a!==(null===(s=u.user)||void 0===s?void 0:s.walletAddress)){m(e=>({...e,isLoading:!0}));try{let t=await fetch("/api/users?walletId=".concat(a));if(!e)return;if(t.ok){let{user:e}=await t.json();m(t=>({...t,isAuthenticated:!0,user:{...e,walletAddress:a},showUserForm:!1,showLoginModal:!1,isLoading:!1}))}else 404===t.status&&m(e=>({...e,isAuthenticated:!1,user:{walletAddress:a},showUserForm:!0,showLoginModal:!0,isLoading:!1}))}catch(t){if(!e)return;console.error("Error checking user:",t),m(e=>({...e,isLoading:!1}))}}else o||m(e=>({...e,isAuthenticated:!1,user:null,isLoading:!1}))})(),()=>{e=!1}},[o,null==c?void 0:null===(t=c.wallet)||void 0===t?void 0:t.address]);let f=async()=>{m(e=>({...e,showLoginModal:!0}));try{await l()}catch(e){console.error("Login error:",e),m(e=>({...e,showLoginModal:!1}))}},p=async()=>{m(e=>({...e,isLoading:!0}));try{await d(),m(e=>({...e,isAuthenticated:!1,user:null,showLoginModal:!1,showUserForm:!1}))}catch(e){console.error("Logout error:",e)}finally{m(e=>({...e,isLoading:!1}))}},x=async e=>{var t;if(null===(t=u.user)||void 0===t?void 0:t.walletAddress){m(e=>({...e,isLoading:!0}));try{let t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,walletId:u.user.walletAddress})});if(!t.ok)throw Error("Failed to update user");let{user:s}=await t.json();m(e=>{var t;return{...e,isAuthenticated:!0,user:{...s,walletAddress:null===(t=u.user)||void 0===t?void 0:t.walletAddress},showUserForm:!1,showLoginModal:!1}})}catch(e){console.error("Update user error:",e)}finally{m(e=>({...e,isLoading:!1}))}}};return(0,a.jsx)(n.Provider,{value:{...u,login:f,logout:p,updateUser:x,setShowLoginModal:e=>m(t=>({...t,showLoginModal:e}))},children:s})}let d=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3698:function(e,t,s){"use strict";s.d(t,{db:function(){return l}});var a=s(23302),r=s(5504),i=s(80158);let n=(0,a.qn)("postgresql://neondb_owner:npg_8mPw6WMyXtCE@ep-bitter-recipe-a85tzvx5-pooler.eastus2.azure.neon.tech/neondb?sslmode=require"),l=(0,r.tS)(n,{schema:i})},80158:function(e,t,s){"use strict";s.r(t),s.d(t,{activities:function(){return y},activityProgress:function(){return j},chatHistory:function(){return x},chatMessages:function(){return k},chatRoomMembers:function(){return C},chatRooms:function(){return L},commentLikes:function(){return A},comments:function(){return w},deviceSettings:function(){return m},forumMembers:function(){return b},forums:function(){return g},healthMetrics:function(){return f},postLikes:function(){return _},posts:function(){return v},therapySessions:function(){return u},userPreferences:function(){return p},users:function(){return c},wearableDevices:function(){return h},wearableMetrics:function(){return N}});var a=s(91813),r=s(1333),i=s(82052),n=s(50177),l=s(94651),d=s(76016),o=s(80894);let c=(0,a.af)("users",{id:(0,r.fL)("id").primaryKey(),name:(0,r.fL)("name"),email:(0,r.fL)("email"),walletId:(0,r.fL)("wallet_id").notNull().unique(),walletAddress:(0,r.fL)("wallet_address"),encryptedData:(0,i.JB)("encrypted_data"),createdAt:(0,n.AB)("created_at").notNull().defaultNow(),updatedAt:(0,n.AB)("updated_at").notNull().defaultNow()}),u=(0,a.af)("therapy_sessions",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),scheduledTime:(0,n.AB)("scheduled_time").notNull(),status:(0,r.fL)("status").notNull(),type:(0,r.fL)("type").notNull(),notes:(0,r.fL)("notes"),summary:(0,r.fL)("summary"),aiRecommendations:(0,i.JB)("ai_recommendations"),mood:(0,r.fL)("mood"),createdAt:(0,n.AB)("created_at").defaultNow(),completedAt:(0,n.AB)("completed_at"),title:(0,r.fL)("title"),updatedAt:(0,n.AB)("updated_at").notNull().defaultNow()}),m=(0,a.af)("device_settings",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),deviceType:(0,r.fL)("device_type").notNull(),settings:(0,i.JB)("settings").notNull(),updatedAt:(0,n.AB)("updated_at").defaultNow()}),f=(0,a.af)("health_metrics",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),metricType:(0,r.fL)("metric_type").notNull(),value:(0,i.JB)("value").notNull(),timestamp:(0,n.AB)("timestamp").defaultNow()}),p=(0,a.af)("user_preferences",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id).unique(),notifications:(0,d.O7)("notifications").default(!0),aiInterventions:(0,d.O7)("ai_interventions").default(!0),preferences:(0,i.JB)("preferences").default({}),updatedAt:(0,n.AB)("updated_at").defaultNow()}),x=(0,a.af)("chat_history",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),message:(0,r.fL)("message").notNull(),role:(0,r.fL)("role").notNull(),timestamp:(0,n.AB)("timestamp").defaultNow(),sentiment:(0,r.fL)("sentiment"),context:(0,i.JB)("context")}),h=(0,a.af)("wearable_devices",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),deviceType:(0,r.fL)("device_type").notNull(),deviceId:(0,r.fL)("device_id").notNull(),accessToken:(0,r.fL)("access_token"),refreshToken:(0,r.fL)("refresh_token"),lastSynced:(0,n.AB)("last_synced"),settings:(0,i.JB)("settings")}),N=(0,a.af)("wearable_metrics",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),deviceId:(0,l.Vj)("device_id").references(()=>h.id),metricType:(0,r.fL)("metric_type").notNull(),value:(0,i.JB)("value").notNull(),timestamp:(0,n.AB)("timestamp").defaultNow(),source:(0,r.fL)("source").notNull()}),y=(0,a.af)("activities",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),userId:(0,r.fL)("user_id").references(()=>c.id),type:(0,r.fL)("type").notNull(),name:(0,r.fL)("name").notNull(),description:(0,r.fL)("description"),timestamp:(0,n.AB)("timestamp").notNull().defaultNow(),duration:(0,o._L)("duration"),completed:(0,d.O7)("completed").notNull().default(!1),moodScore:(0,o._L)("mood_score"),moodNote:(0,r.fL)("mood_note"),createdAt:(0,n.AB)("created_at").notNull().defaultNow(),updatedAt:(0,n.AB)("updated_at").notNull().defaultNow()}),j=(0,a.af)("activity_progress",{id:(0,l.Vj)("id").primaryKey().defaultRandom(),activityId:(0,l.Vj)("activity_id").references(()=>y.id),userId:(0,r.fL)("user_id").references(()=>c.id),status:(0,r.fL)("status").notNull(),startedAt:(0,n.AB)("started_at").notNull(),completedAt:(0,n.AB)("completed_at"),notes:(0,r.fL)("notes"),metrics:(0,i.JB)("metrics")}),g=(0,a.af)("forums",{id:(0,r.fL)("id").primaryKey(),name:(0,r.fL)("name").notNull(),description:(0,r.fL)("description").notNull(),icon:(0,r.fL)("icon").notNull(),memberCount:(0,o._L)("member_count").default(0),postCount:(0,o._L)("post_count").default(0),isPrivate:(0,d.O7)("is_private").default(!1),topics:(0,r.fL)("topics").array().notNull(),createdAt:(0,n.AB)("created_at").defaultNow(),updatedAt:(0,n.AB)("updated_at").defaultNow()}),v=(0,a.af)("posts",{id:(0,r.fL)("id").primaryKey(),forumId:(0,r.fL)("forum_id").references(()=>g.id).notNull(),userId:(0,r.fL)("user_id").notNull(),title:(0,r.fL)("title").notNull(),content:(0,r.fL)("content").notNull(),topic:(0,r.fL)("topic").notNull(),likes:(0,o._L)("likes").default(0),comments:(0,o._L)("comments").default(0),tags:(0,r.fL)("tags").array(),isPrivate:(0,d.O7)("is_private").default(!1),createdAt:(0,n.AB)("created_at").defaultNow(),updatedAt:(0,n.AB)("updated_at").defaultNow()}),w=(0,a.af)("comments",{id:(0,r.fL)("id").primaryKey(),postId:(0,r.fL)("post_id").references(()=>v.id).notNull(),userId:(0,r.fL)("user_id").notNull(),content:(0,r.fL)("content").notNull(),likes:(0,o._L)("likes").default(0),createdAt:(0,n.AB)("created_at").defaultNow(),updatedAt:(0,n.AB)("updated_at").defaultNow()}),b=(0,a.af)("forum_members",{id:(0,r.fL)("id").primaryKey(),forumId:(0,r.fL)("forum_id").references(()=>g.id).notNull(),userId:(0,r.fL)("user_id").notNull(),role:(0,r.fL)("role").default("member"),joinedAt:(0,n.AB)("joined_at").defaultNow()}),_=(0,a.af)("post_likes",{id:(0,r.fL)("id").primaryKey(),postId:(0,r.fL)("post_id").references(()=>v.id).notNull(),userId:(0,r.fL)("user_id").notNull(),createdAt:(0,n.AB)("created_at").defaultNow()}),A=(0,a.af)("comment_likes",{id:(0,r.fL)("id").primaryKey(),commentId:(0,r.fL)("comment_id").references(()=>w.id).notNull(),userId:(0,r.fL)("user_id").notNull(),createdAt:(0,n.AB)("created_at").defaultNow()}),L=(0,a.af)("chat_rooms",{id:(0,r.fL)("id").primaryKey(),name:(0,r.fL)("name").notNull(),description:(0,r.fL)("description").notNull(),icon:(0,r.fL)("icon").notNull(),memberCount:(0,o._L)("member_count").default(0),isPrivate:(0,d.O7)("is_private").default(!1),createdAt:(0,n.AB)("created_at").defaultNow(),updatedAt:(0,n.AB)("updated_at").defaultNow()}),k=(0,a.af)("chat_messages",{id:(0,r.fL)("id").primaryKey(),roomId:(0,r.fL)("room_id").references(()=>L.id).notNull(),userId:(0,r.fL)("user_id").notNull(),content:(0,r.fL)("content").notNull(),createdAt:(0,n.AB)("created_at").defaultNow(),updatedAt:(0,n.AB)("updated_at").defaultNow()}),C=(0,a.af)("chat_room_members",{id:(0,r.fL)("id").primaryKey(),roomId:(0,r.fL)("room_id").references(()=>L.id).notNull(),userId:(0,r.fL)("user_id").notNull(),role:(0,r.fL)("role").default("member"),joinedAt:(0,n.AB)("joined_at").defaultNow(),lastSeen:(0,n.AB)("last_seen").defaultNow()})},72797:function(e,t,s){"use strict";s.d(t,{A:function(){return i}});var a=s(49127);let r={emails:["mayankdindoire@gmail.com"],walletAddresses:["0x98EE7891eC3fe81453d78F37457d81D91A0248bD"].map(e=>e.toLowerCase())};function i(){let{user:e}=(0,a.a)();return{isAdmin:!!(e&&(e.email&&r.emails.includes(e.email)||e.walletAddress&&r.walletAddresses.includes(e.walletAddress.toLowerCase()))),adminConfig:r}}}},function(e){e.O(0,[8502,6649,5504,5990,8836,4496,2125,9348,393,2920,2971,7023,1744],function(){return e(e.s=17514)}),_N_E=e.O()}]);