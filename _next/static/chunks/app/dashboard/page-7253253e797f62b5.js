(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{63389:function(e,t,s){Promise.resolve().then(s.bind(s,18918))},18918:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eZ}});var a=s(57437),i=s(2265),r=s(47267),n=s(79869),l=s(64042),o=s(85016),c=s(33907),d=s(24241),u=s(38296),m=s(92699),x=s(94207),h=s(6600),p=s(76780),f=s(21304),g=s(47390),v=s(71976),j=s(10462),y=s(56160),N=s(74697),b=s(36013),w=s(50495),S=s(47412),C=s(52122),Z=s(37440),k=s(16463);function E(){let[e,t]=(0,i.useState)(!1),[s,r]=(0,i.useState)(!1),[n,l]=(0,i.useState)(""),o=(0,k.useRouter)();return(0,a.jsx)("div",{className:"fixed bottom-6 right-6",children:(0,a.jsx)(w.z,{size:"icon",className:"h-14 w-14 rounded-full shadow-lg hover:scale-105 transition-transform",onClick:()=>{o.push("/therapy/new")},children:(0,a.jsx)(g.Z,{className:"h-6 w-6"})})})}var D=s(12785),A=s(3274);function I(e){let{onSubmit:t,isLoading:s}=e,[r,n]=(0,i.useState)(50),l=[{value:0,label:"\uD83D\uDE14",description:"Very Low"},{value:25,label:"\uD83D\uDE15",description:"Low"},{value:50,label:"\uD83D\uDE0A",description:"Neutral"},{value:75,label:"\uD83D\uDE03",description:"Good"},{value:100,label:"\uD83E\uDD17",description:"Great"}],o=l.find(e=>15>Math.abs(r-e.value))||l[2];return(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"text-4xl",children:o.label}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:o.description})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between px-2",children:l.map(e=>(0,a.jsx)("div",{className:"cursor-pointer transition-opacity ".concat(15>Math.abs(r-e.value)?"opacity-100":"opacity-50"),onClick:()=>n(e.value),children:(0,a.jsx)("div",{className:"text-2xl",children:e.label})},e.value))}),(0,a.jsx)(D.i,{value:[r],onValueChange:e=>n(e[0]),min:0,max:100,step:1,className:"py-4"})]}),(0,a.jsx)(w.z,{className:"w-full",onClick:()=>t({moodScore:r}),disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Mood"})]})}var R=s(63724),z=s(19447),M=s(64175),T=s(85251),_=s(82177),O=s(67986),Y=s(90837),F=s(34446),V=s(22468),P=s(70571);function G(){let[e,t]=(0,i.useState)("inhale"),[s,n]=(0,i.useState)(0),[l,o]=(0,i.useState)(1),[c,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let s;if(!c&&!u)return s="inhale"===e?setInterval(()=>{n(e=>e>=100?(t("hold"),0):e+2)},100):"hold"===e?setInterval(()=>{n(e=>e>=100?(t("exhale"),0):e+4)},100):setInterval(()=>{n(e=>e>=100?l>=5?(d(!0),e):(t("inhale"),o(e=>e+1),0):e+2)},100),()=>clearInterval(s)},[e,l,c,u]),c)?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[400px] space-y-6",children:[(0,a.jsx)(r.E.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center",children:(0,a.jsx)(V.Z,{className:"w-10 h-10 text-green-500"})}),(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:"Great job!"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-center max-w-sm",children:["You've completed ",5," rounds of breathing exercises. How do you feel?"]}),(0,a.jsx)(w.z,{onClick:()=>{t("inhale"),n(0),o(1),d(!1),m(!1)},className:"mt-4",children:"Start Again"})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[400px] space-y-8",children:[(0,a.jsx)(F.M,{mode:"wait",children:(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"text-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[(0,a.jsx)(r.E.div,{animate:{scale:"inhale"===e?1.5:"exhale"===e?1:1.2},transition:{duration:4,ease:"easeInOut"},className:"absolute inset-0 bg-primary/10 rounded-full"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(R.Z,{className:"w-8 h-8 text-primary"})})]}),(0,a.jsx)("h3",{className:"text-2xl font-semibold",children:"inhale"===e?"Breathe In":"hold"===e?"Hold":"Breathe Out"})]},e)}),(0,a.jsx)("div",{className:"w-64",children:(0,a.jsx)(P.E,{value:s,className:"h-2"})}),(0,a.jsxs)("div",{className:"space-y-2 text-center",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Round ",l," of ",5]}),(0,a.jsx)(w.z,{variant:"ghost",size:"sm",onClick:()=>m(!u),children:u?"Resume":"Pause"})]})]})}let H=[{type:"rock",icon:"\uD83E\uDEA8"},{type:"flower",icon:"\uD83C\uDF38"},{type:"tree",icon:"\uD83C\uDF32"},{type:"bamboo",icon:"\uD83C\uDF8B"}];function B(){let[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)(H[0]);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center gap-4",children:H.map(e=>(0,a.jsx)(r.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>n(e),className:"p-3 rounded-lg ".concat(s.type===e.type?"bg-primary/20":"bg-primary/5"),children:(0,a.jsx)("span",{className:"text-2xl",children:e.icon})},e.type))}),(0,a.jsx)("div",{onClick:a=>{let i=a.currentTarget.getBoundingClientRect(),r=a.clientX-i.left,n=a.clientY-i.top;t([...e,{...s,x:r,y:n}])},className:"relative w-full h-[400px] bg-primary/5 rounded-lg cursor-pointer overflow-hidden",children:e.map((e,t)=>(0,a.jsx)(r.E.div,{initial:{scale:0},animate:{scale:1},style:{position:"absolute",left:e.x-12,top:e.y-12},className:"text-2xl",children:e.icon},t))})]})}var L=s(23395),U=s(38733),W=s(24841),q=s(98094);function $(){let[e,t]=(0,i.useState)(!1),[s,n]=(0,i.useState)(50),[l,o]=(0,i.useState)(0),[c,d]=(0,i.useState)(300),[u]=(0,i.useState)({birds:new Audio("/sounds/birds.mp3"),wind:new Audio("/sounds/wind.mp3"),leaves:new Audio("/sounds/leaves.mp3")});(0,i.useEffect)(()=>(Object.values(u).forEach(e=>{e.loop=!0,e.volume=s/100}),()=>{Object.values(u).forEach(e=>{e.pause(),e.currentTime=0})}),[]),(0,i.useEffect)(()=>{Object.values(u).forEach(e=>{e.volume=s/100})},[s]),(0,i.useEffect)(()=>{let t;return e&&c>0&&(t=setInterval(()=>{d(e=>{let t=e-1;return o((300-t)/300*100),t})},1e3)),()=>clearInterval(t)},[e,c]);let m=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0"));return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[400px] space-y-8",children:[(0,a.jsx)("div",{className:"relative w-48 h-48",children:(0,a.jsxs)(r.E.div,{animate:{scale:[1,1.05,1],rotate:[0,1,-1,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-green-500/20 to-transparent rounded-full blur-xl"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(M.Z,{className:"w-24 h-24 text-green-600"})})]})}),(0,a.jsxs)("div",{className:"w-64 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Volume"}),(0,a.jsxs)("span",{children:[s,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[0===s?(0,a.jsx)(L.Z,{className:"w-4 h-4"}):(0,a.jsx)(U.Z,{className:"w-4 h-4"}),(0,a.jsx)(D.i,{value:[s],onValueChange:e=>n(e[0]),max:100,step:1})]})]}),(0,a.jsx)(P.E,{value:l,className:"h-2"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:m(c)}),(0,a.jsx)(w.z,{variant:"outline",size:"icon",onClick:()=>{e?Object.values(u).forEach(e=>e.pause()):Object.values(u).forEach(e=>e.play()),t(!e)},className:"rounded-full",children:e?(0,a.jsx)(W.Z,{className:"h-4 w-4"}):(0,a.jsx)(q.Z,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:m(300)})]})]})]})}var K=s(49805);function X(){let[e,t]=(0,i.useState)(!1),[s,n]=(0,i.useState)(50),[l,o]=(0,i.useState)(0),[c,d]=(0,i.useState)(300),u=(0,K._)(),[m]=(0,i.useState)(new Audio("/sounds/waves.mp3"));(0,i.useEffect)(()=>(m.loop=!0,m.volume=s/100,()=>{m.pause(),m.currentTime=0}),[]),(0,i.useEffect)(()=>{m.volume=s/100},[s]),(0,i.useEffect)(()=>{let t;return e&&c>0?(t=setInterval(()=>{d(e=>{let t=e-1;return o((300-t)/300*100),t})},1e3),u.start({y:[0,-20,0],transition:{duration:8,repeat:1/0,ease:"easeInOut"}})):u.stop(),()=>clearInterval(t)},[e,c]);let x=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0"));return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-[400px] space-y-8",children:[(0,a.jsxs)("div",{className:"relative w-48 h-48",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-500/20 to-transparent rounded-full blur-xl"}),(0,a.jsx)(r.E.div,{animate:u,className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(T.Z,{className:"w-24 h-24 text-blue-600"}),(0,a.jsx)(r.E.div,{animate:{opacity:[.5,.8,.5]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-blue-400/10 blur-xl rounded-full"})]})})]}),(0,a.jsxs)("div",{className:"w-64 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Volume"}),(0,a.jsxs)("span",{children:[s,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[0===s?(0,a.jsx)(L.Z,{className:"w-4 h-4"}):(0,a.jsx)(U.Z,{className:"w-4 h-4"}),(0,a.jsx)(D.i,{value:[s],onValueChange:e=>n(e[0]),max:100,step:1})]})]}),(0,a.jsx)(P.E,{value:l,className:"h-2"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:x(c)}),(0,a.jsx)(w.z,{variant:"outline",size:"icon",onClick:()=>{e?m.pause():m.play(),t(!e)},className:"rounded-full",children:e?(0,a.jsx)(W.Z,{className:"h-4 w-4"}):(0,a.jsx)(q.Z,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:x(300)})]})]})]})}let J=[{id:"breathing",title:"Breathing Patterns",description:"Follow calming breathing exercises with visual guidance",icon:R.Z,color:"text-blue-500",bgColor:"bg-blue-500/10",duration:"5 mins"},{id:"garden",title:"Zen Garden",description:"Create and maintain your digital peaceful space",icon:z.Z,color:"text-rose-500",bgColor:"bg-rose-500/10",duration:"10 mins"},{id:"forest",title:"Mindful Forest",description:"Take a peaceful walk through a virtual forest",icon:M.Z,color:"text-green-500",bgColor:"bg-green-500/10",duration:"15 mins"},{id:"waves",title:"Ocean Waves",description:"Match your breath with gentle ocean waves",icon:T.Z,color:"text-cyan-500",bgColor:"bg-cyan-500/10",duration:"8 mins"}],Q=e=>{var t,s;let{onGamePlayed:n}=e,[l,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),u=async e=>{if(o(e),d(!0),n)try{var t;await n(e,(null===(t=J.find(t=>t.id===e))||void 0===t?void 0:t.description)||"")}catch(e){console.error("Error logging game activity:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b.Zb,{className:"border-primary/10",children:[(0,a.jsxs)(b.Ol,{children:[(0,a.jsxs)(b.ll,{className:"text-xl font-semibold flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5 text-primary"}),"Anxiety Relief Activities"]}),(0,a.jsx)(b.SZ,{children:"Interactive exercises to help reduce stress and anxiety"})]}),(0,a.jsxs)(b.aY,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:J.map(e=>(0,a.jsx)(r.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsx)(b.Zb,{className:"border-primary/10 hover:bg-primary/5 transition-colors cursor-pointer ".concat(l===e.id?"ring-2 ring-primary":""),onClick:()=>u(e.id),children:(0,a.jsx)(b.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(e.bgColor," ").concat(e.color),children:(0,a.jsx)(e.icon,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.duration})]})]})]})})})},e.id))}),l&&(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)(w.z,{className:"gap-2",onClick:()=>o(null),children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),"Start ",null===(t=J.find(e=>e.id===l))||void 0===t?void 0:t.title]})})]})]}),(0,a.jsx)(Y.Vq,{open:c,onOpenChange:d,children:(0,a.jsxs)(Y.cZ,{className:"sm:max-w-[600px]",children:[(0,a.jsx)(Y.fK,{children:(0,a.jsx)(Y.$N,{children:null===(s=J.find(e=>e.id===l))||void 0===s?void 0:s.title})}),(()=>{switch(l){case"breathing":return(0,a.jsx)(G,{});case"garden":return(0,a.jsx)(B,{});case"forest":return(0,a.jsx)($,{});case"waves":return(0,a.jsx)(X,{});default:return null}})()]})})]})};var ee=s(17494),et=s(37418),es=s(36504),ea=s(30637),ei=s(63100),er=s(50508),en=s(94858),el=s(49127),eo=s(83102),ec=s(67135),ed=s(12381),eu=s(42421),em=s(14392);let ex=ed.fC;ed.ZA;let eh=ed.B4,ep=i.forwardRef((e,t)=>{let{className:s,children:i,...r}=e;return(0,a.jsxs)(ed.xz,{ref:t,className:(0,Z.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[i,(0,a.jsx)(ed.JO,{asChild:!0,children:(0,a.jsx)(eu.Z,{className:"h-4 w-4 opacity-50"})})]})});ep.displayName=ed.xz.displayName;let ef=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(ed.u_,{ref:t,className:(0,Z.cn)("flex cursor-default items-center justify-center py-1",s),...i,children:(0,a.jsx)(em.Z,{className:"h-4 w-4"})})});ef.displayName=ed.u_.displayName;let eg=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(ed.$G,{ref:t,className:(0,Z.cn)("flex cursor-default items-center justify-center py-1",s),...i,children:(0,a.jsx)(eu.Z,{className:"h-4 w-4"})})});eg.displayName=ed.$G.displayName;let ev=i.forwardRef((e,t)=>{let{className:s,children:i,position:r="popper",...n}=e;return(0,a.jsx)(ed.h_,{children:(0,a.jsxs)(ed.VY,{ref:t,className:(0,Z.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[(0,a.jsx)(ef,{}),(0,a.jsx)(ed.l_,{className:(0,Z.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,a.jsx)(eg,{})]})})});ev.displayName=ed.VY.displayName,i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(ed.__,{ref:t,className:(0,Z.cn)("px-2 py-1.5 text-sm font-semibold",s),...i})}).displayName=ed.__.displayName;let ej=i.forwardRef((e,t)=>{let{className:s,children:i,...r}=e;return(0,a.jsxs)(ed.ck,{ref:t,className:(0,Z.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ed.wU,{children:(0,a.jsx)(V.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(ed.eT,{children:i})]})});ej.displayName=ed.ck.displayName,i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(ed.Z0,{ref:t,className:(0,Z.cn)("-mx-1 my-1 h-px bg-muted",s),...i})}).displayName=ed.Z0.displayName;let ey=[{id:"meditation",name:"Meditation"},{id:"exercise",name:"Exercise"},{id:"walking",name:"Walking"},{id:"reading",name:"Reading"},{id:"journaling",name:"Journaling"},{id:"therapy",name:"Therapy Session"}];function eN(e){let{open:t,onOpenChange:s,onActivityLogged:r}=e,[n,l]=(0,i.useState)(!1),{user:o}=(0,el.a)(),[c,d]=(0,i.useState)(""),[u,m]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[p,f]=(0,i.useState)(""),g=async e=>{if(e.preventDefault(),(null==o?void 0:o.id)&&c&&u){l(!0);try{await (0,et.ym)({userId:o.id,type:c,name:u,description:p,duration:x?parseInt(x):void 0}),d(""),m(""),h(""),f(""),r(),s(!1)}catch(e){console.error("Error logging activity:",e)}finally{l(!1)}}};return(0,a.jsx)(Y.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(Y.cZ,{children:[(0,a.jsxs)(Y.fK,{children:[(0,a.jsx)(Y.$N,{children:"Log Activity"}),(0,a.jsx)(Y.Be,{children:"Record your wellness activity"})]}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ec._,{children:"Activity Type"}),(0,a.jsxs)(ex,{value:c,onValueChange:d,children:[(0,a.jsx)(ep,{children:(0,a.jsx)(eh,{placeholder:"Select activity type"})}),(0,a.jsx)(ev,{children:ey.map(e=>(0,a.jsx)(ej,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ec._,{children:"Name"}),(0,a.jsx)(eo.I,{value:u,onChange:e=>m(e.target.value),placeholder:"Morning Meditation, Evening Walk, etc."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ec._,{children:"Duration (minutes)"}),(0,a.jsx)(eo.I,{type:"number",value:x,onChange:e=>h(e.target.value),placeholder:"15"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ec._,{children:"Description (optional)"}),(0,a.jsx)(eo.I,{value:p,onChange:e=>f(e.target.value),placeholder:"How did it go?"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(w.z,{type:"button",variant:"ghost",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(w.z,{type:"submit",disabled:n,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Activity"})]})]})]})})}let eb=e=>{let{data:t}=e,s=e=>{switch(e){case"high":return"bg-primary hover:bg-primary/90";case"medium":return"bg-primary/60 hover:bg-primary/70";case"low":return"bg-primary/30 hover:bg-primary/40";default:return"bg-muted hover:bg-muted/80"}};return(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("div",{className:(0,Z.cn)("w-full aspect-square rounded-sm cursor-pointer transition-colors",s(e.level))}),(0,a.jsx)("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 hidden group-hover:block",children:(0,a.jsxs)("div",{className:"bg-popover text-popover-foreground text-xs rounded-md px-2 py-1 whitespace-nowrap shadow-md",children:[(0,a.jsx)("p",{className:"font-medium",children:(0,es.Z)(e.date,"MMM d, yyyy")}),(0,a.jsxs)("p",{children:[e.activities.length," activities"]})]})})]},t))})})},ew=e=>{let t=(0,ea.Z)(new Date),s=e.filter(e=>(0,ei.Z)(new Date(e.timestamp),{start:t,end:(0,er.Z)(t,1)})),a=s.filter(e=>"mood"===e.type&&null!==e.moodScore),i=a.length>0?Math.round(a.reduce((e,t)=>e+(t.moodScore||0),0)/a.length):null,r=s.filter(e=>e.completed).length;return{moodScore:i,completionRate:s.length>0?Math.round(r/s.length*100):0,mindfulnessCount:s.filter(e=>["game","meditation","breathing"].includes(e.type)).length,totalActivities:s.length}},eS=e=>{let t=[],s=(0,en.Z)(new Date,7),a=e.filter(e=>new Date(e.timestamp)>=s),i=a.filter(e=>"mood"===e.type&&null!==e.moodScore);if(i.length>=2){let e=i.reduce((e,t)=>e+(t.moodScore||0),0)/i.length,s=i[i.length-1].moodScore||0;s>e?t.push({title:"Mood Improvement",description:"Your recent mood scores are above your weekly average. Keep up the good work!",icon:n.Z,priority:"high"}):s<e-20&&t.push({title:"Mood Change Detected",description:"I've noticed a dip in your mood. Would you like to try some mood-lifting activities?",icon:l.Z,priority:"high"})}let r=a.filter(e=>["game","meditation","breathing"].includes(e.type));r.length>0&&(r.length/7>=1?t.push({title:"Consistent Practice",description:"You've been regularly engaging in mindfulness activities. This can help reduce stress and improve focus.",icon:o.Z,priority:"medium"}):t.push({title:"Mindfulness Opportunity",description:"Try incorporating more mindfulness activities into your daily routine.",icon:c.Z,priority:"low"}));let x=a.filter(e=>e.completed),h=a.length>0?x.length/a.length*100:0;h>=80?t.push({title:"High Achievement",description:"You've completed ".concat(Math.round(h),"% of your activities this week. Excellent commitment!"),icon:o.Z,priority:"high"}):h<50&&t.push({title:"Activity Reminder",description:"You might benefit from setting smaller, more achievable daily goals.",icon:d.Z,priority:"medium"});let p=a.filter(e=>12>new Date(e.timestamp).getHours()),f=a.filter(e=>new Date(e.timestamp).getHours()>=18);return p.length>f.length?t.push({title:"Morning Person",description:"You're most active in the mornings. Consider scheduling important tasks during your peak hours.",icon:u.Z,priority:"medium"}):f.length>p.length&&t.push({title:"Evening Routine",description:"You tend to be more active in the evenings. Make sure to wind down before bedtime.",icon:m.Z,priority:"medium"}),t.sort((e,t)=>{let s={high:0,medium:1,low:2};return s[e.priority]-s[t.priority]}).slice(0,3)},eC=e=>{let{onParamsChange:t}=e,s=(0,k.useSearchParams)();return(0,i.useEffect)(()=>{t(s)},[s,t]),null};function eZ(){let{isLoading:e,user:t,isAuthenticated:s}=(0,el.a)(),[d,u]=(0,i.useState)(!1),[m,D]=(0,i.useState)(new Date),A=(0,k.useRouter)(),[R,z]=(0,i.useState)(!1),[M,T]=(0,i.useState)("low"),[_,O]=(0,i.useState)(!1),[F,V]=(0,i.useState)([{type:"meditation",title:"Breathing Exercise",duration:"5 mins",completed:!1},{type:"activity",title:"Evening Walk",duration:"20 mins",completed:!0}]),[P,G]=(0,i.useState)([]),[H,B]=(0,i.useState)([{role:"assistant",content:"Hi Sarah, how are you feeling today?",timestamp:new Date(Date.now()-3e5)},{role:"user",content:"I'm feeling a bit anxious about my presentation tomorrow.",timestamp:new Date(Date.now()-24e4)},{role:"assistant",content:"I understand presentations can be stressful. Would you like to try a quick breathing exercise together?",timestamp:new Date(Date.now()-18e4)}]),[L,U]=(0,i.useState)([]),[W,q]=(0,i.useState)(!1),[$,K]=(0,i.useState)(!1),[X,J]=(0,i.useState)([]),[eo,ec]=(0,i.useState)(!1),[ed,eu]=(0,i.useState)(!1),[em,ex]=(0,i.useState)(!1),[eh,ep]=(0,i.useState)({moodScore:null,completionRate:0,mindfulnessCount:0,totalActivities:0}),ef=e=>{let t=[],s=new Date;for(let a=27;a>=0;a--){let i=(0,ea.Z)((0,en.Z)(s,a)),r=e.filter(e=>(0,ei.Z)(new Date(e.timestamp),{start:i,end:(0,er.Z)(i,1)})),n="none";r.length>0&&(n=r.length<=2?"low":r.length<=4?"medium":"high"),t.push({date:i,level:n,activities:r.map(e=>({type:e.type,name:e.name,completed:e.completed,time:(0,es.Z)(new Date(e.timestamp),"h:mm a")}))})}return t},eg=(0,i.useCallback)(async()=>{if(null==t?void 0:t.id)try{let e=await (0,et.Ue)(t.id);U(e),J(ef(e))}catch(e){console.error("Error loading activities:",e)}},[null==t?void 0:t.id]);(0,i.useEffect)(()=>{u(!0);let e=setInterval(()=>D(new Date),1e3);return()=>clearInterval(e)},[]),(0,i.useEffect)(()=>{if(window.location.hash){let e=new URLSearchParams(window.location.hash.substring(1)).get("access_token");e&&(localStorage.setItem("fitbit_token",e),A.replace("/dashboard"))}},[A]),(0,i.useEffect)(()=>{if(!e&&!s){z(!0);let e=setTimeout(()=>{A.push("/")},2e3);return()=>clearTimeout(e)}},[s,e,A]),(0,i.useEffect)(()=>{L.length>0&&ep(ew(L))},[L]);let ev=[{title:"Mood Score",value:eh.moodScore?"".concat(eh.moodScore,"%"):"No data",icon:n.Z,color:"text-purple-500",bgColor:"bg-purple-500/10",description:"Today's average mood"},{title:"Completion Rate",value:"".concat(eh.completionRate,"%"),icon:o.Z,color:"text-yellow-500",bgColor:"bg-yellow-500/10",description:"Activities completed"},{title:"Mindfulness",value:"".concat(eh.mindfulnessCount," sessions"),icon:l.Z,color:"text-rose-500",bgColor:"bg-rose-500/10",description:"Mindfulness activities"},{title:"Total Activities",value:eh.totalActivities.toString(),icon:x.Z,color:"text-blue-500",bgColor:"bg-blue-500/10",description:"Planned for today"}];(0,i.useEffect)(()=>{L.length>0&&G(eS(L))},[L]);let ej=async e=>{ex(!0);try{await (0,et.uE)({userId:null==t?void 0:t.id,mood:e.moodScore,note:""}),q(!1)}catch(e){console.error("Error saving mood:",e)}finally{ex(!1)}},ey=async()=>{let e=localStorage.getItem("fitbit_token");if(e)try{let t=await fetch("https://api.fitbit.com/1/user/-/profile.json",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();console.log(e)}else localStorage.removeItem("fitbit_token")}catch(e){console.error("Failed to fetch Fitbit data:",e)}};(0,i.useEffect)(()=>{d&&ey()},[d]),(0,i.useEffect)(()=>{(null==t?void 0:t.id)&&eg()},[null==t?void 0:t.id,eg]);let eZ=(0,i.useCallback)(async(e,s)=>{if(null==t?void 0:t.id)try{await (0,et.ag)({userId:t.id,type:"game",name:e,description:s,completed:!0,duration:null,moodScore:null,moodNote:null}),eg()}catch(e){console.error("Error logging game activity:",e)}},[null==t?void 0:t.id,eg]),ek=(0,i.useCallback)(e=>{},[]);return d?s?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(i.Suspense,{fallback:null,children:(0,a.jsx)(eC,{onParamsChange:ek})}),(0,a.jsxs)(C.W,{className:"pt-20 pb-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-2",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-foreground",children:["Welcome back, ",(null==t?void 0:t.name)||"there"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:m.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)(w.z,{variant:"outline",size:"icon",children:(0,a.jsx)(h.Z,{className:"h-5 w-5"})})})]}),_&&(0,a.jsxs)(S.bZ,{variant:"destructive",className:"animate-pulse",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)(S.Cd,{children:"Crisis Support Available"}),(0,a.jsxs)(S.X,{children:["We've noticed you might be having a difficult time. Help is available 24/7.",(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(w.z,{variant:"secondary",className:"mr-2",children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Call Crisis Line"]}),(0,a.jsx)(w.z,{variant:"outline",children:"Message Therapist"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(b.Zb,{className:"border-primary/10 relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-primary/10 to-transparent"}),(0,a.jsx)(b.aY,{className:"p-6 relative",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Quick Actions"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Start your wellness journey"})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(w.z,{variant:"default",className:(0,Z.cn)("w-full justify-between items-center p-6 h-auto group/button","bg-gradient-to-r from-primary/90 to-primary hover:from-primary hover:to-primary/90","transition-all duration-200 group-hover:translate-y-[-2px]"),onClick:()=>{A.push("/therapy/new")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-white",children:"Start Therapy"}),(0,a.jsx)("div",{className:"text-xs text-white/80",children:"Begin a new session"})]})]}),(0,a.jsx)("div",{className:"opacity-0 group-hover/button:opacity-100 transition-opacity",children:(0,a.jsx)(v.Z,{className:"w-5 h-5 text-white"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(w.z,{variant:"outline",className:(0,Z.cn)("flex flex-col h-[120px] px-4 py-3 group/mood hover:border-primary/50","justify-center items-center text-center","transition-all duration-200 group-hover:translate-y-[-2px]"),onClick:()=>q(!0),children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-rose-500/10 flex items-center justify-center mb-2",children:(0,a.jsx)(l.Z,{className:"w-5 h-5 text-rose-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:"Track Mood"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-0.5",children:"How are you feeling?"})]})]}),(0,a.jsxs)(w.z,{variant:"outline",className:(0,Z.cn)("flex flex-col h-[120px] px-4 py-3 group/ai hover:border-primary/50","justify-center items-center text-center","transition-all duration-200 group-hover:translate-y-[-2px]"),onClick:()=>{ec(!0)},children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center mb-2",children:(0,a.jsx)(j.Z,{className:"w-5 h-5 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:"Check-in"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Quick wellness check"})]})]}),(0,a.jsxs)(w.z,{variant:"outline",className:(0,Z.cn)("flex flex-col h-[120px] px-4 py-3 group/nft hover:border-primary/50","justify-center items-center text-center","transition-all duration-200 group-hover:translate-y-[-2px]"),onClick:()=>A.push("/therapy/nfts"),children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-500/10 flex items-center justify-center mb-2",children:(0,a.jsx)(o.Z,{className:"w-5 h-5 text-yellow-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:"NFT Collection"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-0.5",children:"View your achievements"})]})]})]})]})]})})]}),(0,a.jsxs)(b.Zb,{className:"border-primary/10",children:[(0,a.jsxs)(b.Ol,{children:[(0,a.jsx)(b.ll,{children:"Today's Overview"}),(0,a.jsxs)(b.SZ,{children:["Your wellness metrics for ",(0,es.Z)(new Date,"MMMM d, yyyy")]})]}),(0,a.jsx)(b.aY,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:ev.map((e,t)=>(0,a.jsxs)("div",{className:(0,Z.cn)("p-4 rounded-lg transition-all duration-200 hover:scale-[1.02]",e.bgColor),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e.icon,{className:(0,Z.cn)("w-5 h-5",e.color)}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.title})]}),(0,a.jsx)("p",{className:"text-2xl font-bold mt-2",children:e.value}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]},e.title))})})]}),(0,a.jsxs)(b.Zb,{className:"border-primary/10",children:[(0,a.jsxs)(b.Ol,{children:[(0,a.jsxs)(b.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-primary"}),"AI Insights"]}),(0,a.jsx)(b.SZ,{children:"Personalized recommendations based on your activity patterns"})]}),(0,a.jsx)(b.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:P.length>0?P.map((e,t)=>(0,a.jsxs)("div",{className:(0,Z.cn)("p-4 rounded-lg space-y-2 transition-all hover:scale-[1.02]","high"===e.priority?"bg-primary/10":"medium"===e.priority?"bg-primary/5":"bg-muted"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e.icon,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("p",{className:"font-medium",children:e.title})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]},t)):(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(x.Z,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Complete more activities to receive personalized insights"})]})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)(b.Zb,{className:"border-primary/10 overflow-hidden",children:(0,a.jsxs)(b.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 text-primary flex items-center justify-center ring-2 ring-primary/5",children:(0,a.jsx)(y.Z,{className:"w-6 h-6"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Connect Your Smartwatch"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Track health metrics and get personalized insights through Google Fit"})]}),(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)(ee.a,{onConnect:()=>{}})})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-green-500"}),(0,a.jsx)("span",{children:"Securely connect through Google Fit"})]})]})}),(0,a.jsx)(Q,{onGamePlayed:eZ})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(b.Zb,{className:"border-primary/10",children:[(0,a.jsx)(b.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(b.ll,{children:"Activity Overview"}),(0,a.jsx)(b.SZ,{children:"Your wellness journey over time"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-sm bg-muted"}),(0,a.jsx)("span",{children:"Less"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-sm bg-primary"}),(0,a.jsx)("span",{children:"More"})]})]})]})}),(0,a.jsxs)(b.aY,{className:"space-y-6",children:[(0,a.jsx)(eb,{data:X}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Recent Activities"}),(0,a.jsx)("div",{className:"space-y-2",children:X.slice(-3).flatMap(e=>e.activities.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,Z.cn)("w-2 h-2 rounded-full",t.completed?"bg-green-500":"bg-yellow-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:t.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,es.Z)(e.date,"MMM d")," ",t.time&&"at ".concat(t.time)]})]})]}),(0,a.jsx)(w.z,{variant:"ghost",size:"sm",className:(0,Z.cn)("text-xs",t.completed&&"text-green-500"),children:t.completed?"Completed":"Start"})]},"".concat((0,es.Z)(e.date,"yyyy-MM-dd"),"-").concat(s))))})]})]})]})})]})]})]}),(0,a.jsx)(E,{}),(0,a.jsx)(Y.Vq,{open:W,onOpenChange:q,children:(0,a.jsxs)(Y.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(Y.fK,{children:[(0,a.jsx)(Y.$N,{children:"How are you feeling?"}),(0,a.jsx)(Y.Be,{children:"Move the slider to track your current mood"})]}),(0,a.jsx)(I,{onSubmit:ej,isLoading:em})]})}),$&&(0,a.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:(0,a.jsx)("div",{className:"fixed inset-y-0 right-0 w-full max-w-sm bg-background border-l shadow-lg",children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"AI Check-in"}),(0,a.jsx)(w.z,{variant:"ghost",size:"icon",onClick:()=>K(!1),children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4"})]})})}),(0,a.jsx)(eN,{open:eo,onOpenChange:ec,onActivityLogged:eg})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please sign in to continue"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You need to be authenticated to view this page."})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}},47412:function(e,t,s){"use strict";s.d(t,{Cd:function(){return c},X:function(){return d},bZ:function(){return o}});var a=s(57437),i=s(2265),r=s(13027),n=s(37440);let l=(0,r.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=i.forwardRef((e,t)=>{let{className:s,variant:i,...r}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(l({variant:i}),s),...r})});o.displayName="Alert";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...i})});c.displayName="AlertTitle";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...i})});d.displayName="AlertDescription"},50495:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(57437),i=s(2265),r=s(71538),n=s(13027),l=s(37440);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:n,asChild:c=!1,...d}=e,u=c?r.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:i,size:n,className:s})),ref:t,...d})});c.displayName="Button"},36013:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var a=s(57437),i=s(2265),r=s(37440);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});n.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});o.displayName="CardTitle";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...i})});c.displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...i})});d.displayName="CardContent",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},52122:function(e,t,s){"use strict";s.d(t,{W:function(){return r}});var a=s(57437),i=s(37440);function r(e){let{children:t,className:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("w-full max-w-screen-2xl mx-auto px-2.5 md:px-20",s),...r,children:t})}},90837:function(e,t,s){"use strict";s.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cN:function(){return x},cZ:function(){return u},fK:function(){return m}});var a=s(57437),i=s(2265),r=s(79544),n=s(74697),l=s(37440);let o=r.fC;r.xz;let c=r.h_;r.x8;let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i})});d.displayName=r.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:s,children:i,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[i,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let h=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...i})});h.displayName=r.Dx.displayName;let p=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...i})});p.displayName=r.dk.displayName},83102:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(57437),i=s(2265),r=s(37440);let n=i.forwardRef((e,t)=>{let{className:s,type:i,...n}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},67135:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var a=s(57437),i=s(2265),r=s(38364),n=s(13027),l=s(37440);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.f,{ref:t,className:(0,l.cn)(o(),s),...i})});c.displayName=r.f.displayName},70571:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var a=s(57437),i=s(2265),r=s(52431),n=s(37440);let l=i.forwardRef((e,t)=>{let{className:s,value:i,...l}=e;return(0,a.jsx)(r.fC,{ref:t,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/10",s),...l,children:(0,a.jsx)(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});l.displayName=r.fC.displayName},12785:function(e,t,s){"use strict";s.d(t,{i:function(){return l}});var a=s(57437),i=s(2265),r=s(6121),n=s(37440);let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsxs)(r.fC,{ref:t,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",s),...i,children:[(0,a.jsx)(r.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(r.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(r.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});l.displayName=r.fC.displayName},35657:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let i=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(i=(i+1)%Number.MAX_VALUE).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},17494:function(e,t,s){"use strict";s.d(t,{a:function(){return d}});var a=s(57437),i=s(2265),r=s(50495),n=s(3274),l=s(94250),o=s(35657),c=s(6649);function d(e){let{onConnect:t}=e,[s,d]=(0,i.useState)(!1),{toast:u}=(0,o.pm)(),{getAccessToken:m}=(0,c.s)(),x=async()=>{d(!0);try{let e=await m();if(!e)throw Error("Not authenticated");let t="799418315180-bqcq34ssm89t2b0f3c1b0tqpji8301tq.apps.googleusercontent.com";if(!t)throw Error("Google Client ID is not configured");let s="".concat(window.location.origin,"/api/google-fit/callback"),a=new URL("https://accounts.google.com/o/oauth2/v2/auth");a.searchParams.append("client_id",t),a.searchParams.append("redirect_uri",s),a.searchParams.append("response_type","code"),a.searchParams.append("scope","https://www.googleapis.com/auth/fitness.activity.read https://www.googleapis.com/auth/fitness.heart_rate.read https://www.googleapis.com/auth/fitness.sleep.read"),a.searchParams.append("access_type","offline"),a.searchParams.append("prompt","consent");let i=JSON.stringify({token:e});a.searchParams.append("state",i),console.log("Starting Google Fit connection with:"),console.log("- Client ID:",t),console.log("- Redirect URI:",s),console.log("- State:",i),console.log("- Full Auth URL:",a.toString()),u({title:"Connecting to Google Fit",description:"Redirecting to Google authorization..."}),window.location.href=a.toString()}catch(e){console.error("Failed to connect to Google Fit:",e),u({title:"Connection Failed",description:e instanceof Error?e.message:"Unable to connect to Google Fit. Please try again.",variant:"destructive"})}finally{d(!1)}};return(0,a.jsxs)(r.z,{onClick:x,disabled:s,className:"flex items-center gap-2 bg-primary hover:bg-primary/90",children:[s?(0,a.jsx)(n.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(l.Z,{className:"w-4 h-4"}),s?"Connecting...":"Connect Google Fit"]})}},37440:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(44839),i=s(96164);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,a.W)(t))}}},function(e){e.O(0,[8502,6649,7267,5504,5990,8836,9360,983,6575,3489,4683,2971,7023,1744],function(){return e(e.s=63389)}),_N_E=e.O()}]);